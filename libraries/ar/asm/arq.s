.include "macros.inc"

.section .text, "ax"  # 0x800065A0 - 0x8010F860

.global __ARQServiceQueueLo
__ARQServiceQueueLo:
/* 800D43E4 000D0304  7C 08 02 A6 */	mflr r0
/* 800D43E8 000D0308  90 01 00 04 */	stw r0, 4(r1)
/* 800D43EC 000D030C  94 21 FF F8 */	stwu r1, -8(r1)
/* 800D43F0 000D0310  80 0D A3 24 */	lwz r0, __ARQRequestPendingLo@sda21(r13)
/* 800D43F4 000D0314  28 00 00 00 */	cmplwi r0, 0
/* 800D43F8 000D0318  40 82 00 1C */	bne lbl_800D4414
/* 800D43FC 000D031C  80 6D A3 18 */	lwz r3, __ARQRequestQueueLo@sda21(r13)
/* 800D4400 000D0320  28 03 00 00 */	cmplwi r3, 0
/* 800D4404 000D0324  41 82 00 10 */	beq lbl_800D4414
/* 800D4408 000D0328  90 6D A3 24 */	stw r3, __ARQRequestPendingLo@sda21(r13)
/* 800D440C 000D032C  80 03 00 00 */	lwz r0, 0(r3)
/* 800D4410 000D0330  90 0D A3 18 */	stw r0, __ARQRequestQueueLo@sda21(r13)
lbl_800D4414:
/* 800D4414 000D0334  80 AD A3 24 */	lwz r5, __ARQRequestPendingLo@sda21(r13)
/* 800D4418 000D0338  28 05 00 00 */	cmplwi r5, 0
/* 800D441C 000D033C  41 82 00 B8 */	beq lbl_800D44D4
/* 800D4420 000D0340  80 C5 00 18 */	lwz r6, 0x18(r5)
/* 800D4424 000D0344  80 0D A3 30 */	lwz r0, __ARQChunkSize@sda21(r13)
/* 800D4428 000D0348  7C 06 00 40 */	cmplw r6, r0
/* 800D442C 000D034C  41 81 00 3C */	bgt lbl_800D4468
/* 800D4430 000D0350  80 65 00 08 */	lwz r3, 8(r5)
/* 800D4434 000D0354  28 03 00 00 */	cmplwi r3, 0
/* 800D4438 000D0358  40 82 00 14 */	bne lbl_800D444C
/* 800D443C 000D035C  80 85 00 10 */	lwz r4, 0x10(r5)
/* 800D4440 000D0360  80 A5 00 14 */	lwz r5, 0x14(r5)
/* 800D4444 000D0364  4B FF EE 69 */	bl ARStartDMA
/* 800D4448 000D0368  48 00 00 10 */	b lbl_800D4458
lbl_800D444C:
/* 800D444C 000D036C  80 85 00 14 */	lwz r4, 0x14(r5)
/* 800D4450 000D0370  80 A5 00 10 */	lwz r5, 0x10(r5)
/* 800D4454 000D0374  4B FF EE 59 */	bl ARStartDMA
lbl_800D4458:
/* 800D4458 000D0378  80 6D A3 24 */	lwz r3, __ARQRequestPendingLo@sda21(r13)
/* 800D445C 000D037C  80 03 00 1C */	lwz r0, 0x1c(r3)
/* 800D4460 000D0380  90 0D A3 2C */	stw r0, __ARQCallbackLo@sda21(r13)
/* 800D4464 000D0384  48 00 00 34 */	b lbl_800D4498
lbl_800D4468:
/* 800D4468 000D0388  80 65 00 08 */	lwz r3, 8(r5)
/* 800D446C 000D038C  28 03 00 00 */	cmplwi r3, 0
/* 800D4470 000D0390  40 82 00 18 */	bne lbl_800D4488
/* 800D4474 000D0394  80 85 00 10 */	lwz r4, 0x10(r5)
/* 800D4478 000D0398  7C 06 03 78 */	mr r6, r0
/* 800D447C 000D039C  80 A5 00 14 */	lwz r5, 0x14(r5)
/* 800D4480 000D03A0  4B FF EE 2D */	bl ARStartDMA
/* 800D4484 000D03A4  48 00 00 14 */	b lbl_800D4498
lbl_800D4488:
/* 800D4488 000D03A8  80 85 00 14 */	lwz r4, 0x14(r5)
/* 800D448C 000D03AC  7C 06 03 78 */	mr r6, r0
/* 800D4490 000D03B0  80 A5 00 10 */	lwz r5, 0x10(r5)
/* 800D4494 000D03B4  4B FF EE 19 */	bl ARStartDMA
lbl_800D4498:
/* 800D4498 000D03B8  80 6D A3 24 */	lwz r3, __ARQRequestPendingLo@sda21(r13)
/* 800D449C 000D03BC  80 8D A3 30 */	lwz r4, __ARQChunkSize@sda21(r13)
/* 800D44A0 000D03C0  80 03 00 18 */	lwz r0, 0x18(r3)
/* 800D44A4 000D03C4  7C 04 00 50 */	subf r0, r4, r0
/* 800D44A8 000D03C8  90 03 00 18 */	stw r0, 0x18(r3)
/* 800D44AC 000D03CC  80 8D A3 24 */	lwz r4, __ARQRequestPendingLo@sda21(r13)
/* 800D44B0 000D03D0  80 0D A3 30 */	lwz r0, __ARQChunkSize@sda21(r13)
/* 800D44B4 000D03D4  80 64 00 10 */	lwz r3, 0x10(r4)
/* 800D44B8 000D03D8  7C 03 02 14 */	add r0, r3, r0
/* 800D44BC 000D03DC  90 04 00 10 */	stw r0, 0x10(r4)
/* 800D44C0 000D03E0  80 8D A3 24 */	lwz r4, __ARQRequestPendingLo@sda21(r13)
/* 800D44C4 000D03E4  80 0D A3 30 */	lwz r0, __ARQChunkSize@sda21(r13)
/* 800D44C8 000D03E8  80 64 00 14 */	lwz r3, 0x14(r4)
/* 800D44CC 000D03EC  7C 03 02 14 */	add r0, r3, r0
/* 800D44D0 000D03F0  90 04 00 14 */	stw r0, 0x14(r4)
lbl_800D44D4:
/* 800D44D4 000D03F4  80 01 00 0C */	lwz r0, 0xc(r1)
/* 800D44D8 000D03F8  38 21 00 08 */	addi r1, r1, 8
/* 800D44DC 000D03FC  7C 08 03 A6 */	mtlr r0
/* 800D44E0 000D0400  4E 80 00 20 */	blr

.global __ARQCallbackHack
__ARQCallbackHack:
/* 800D44E4 000D0404  4E 80 00 20 */	blr

.global __ARQInterruptServiceRoutine
__ARQInterruptServiceRoutine:
/* 800D44E8 000D0408  7C 08 02 A6 */	mflr r0
/* 800D44EC 000D040C  90 01 00 04 */	stw r0, 4(r1)
/* 800D44F0 000D0410  94 21 FF F8 */	stwu r1, -8(r1)
/* 800D44F4 000D0414  81 8D A3 28 */	lwz r12, __ARQCallbackHi@sda21(r13)
/* 800D44F8 000D0418  28 0C 00 00 */	cmplwi r12, 0
/* 800D44FC 000D041C  41 82 00 20 */	beq lbl_800D451C
/* 800D4500 000D0420  80 6D A3 20 */	lwz r3, __ARQRequestPendingHi@sda21(r13)
/* 800D4504 000D0424  7D 88 03 A6 */	mtlr r12
/* 800D4508 000D0428  4E 80 00 21 */	blrl
/* 800D450C 000D042C  38 00 00 00 */	li r0, 0
/* 800D4510 000D0430  90 0D A3 20 */	stw r0, __ARQRequestPendingHi@sda21(r13)
/* 800D4514 000D0434  90 0D A3 28 */	stw r0, __ARQCallbackHi@sda21(r13)
/* 800D4518 000D0438  48 00 00 28 */	b lbl_800D4540
lbl_800D451C:
/* 800D451C 000D043C  81 8D A3 2C */	lwz r12, __ARQCallbackLo@sda21(r13)
/* 800D4520 000D0440  28 0C 00 00 */	cmplwi r12, 0
/* 800D4524 000D0444  41 82 00 1C */	beq lbl_800D4540
/* 800D4528 000D0448  80 6D A3 24 */	lwz r3, __ARQRequestPendingLo@sda21(r13)
/* 800D452C 000D044C  7D 88 03 A6 */	mtlr r12
/* 800D4530 000D0450  4E 80 00 21 */	blrl
/* 800D4534 000D0454  38 00 00 00 */	li r0, 0
/* 800D4538 000D0458  90 0D A3 24 */	stw r0, __ARQRequestPendingLo@sda21(r13)
/* 800D453C 000D045C  90 0D A3 2C */	stw r0, __ARQCallbackLo@sda21(r13)
lbl_800D4540:
/* 800D4540 000D0460  80 CD A3 10 */	lwz r6, __ARQRequestQueueHi@sda21(r13)
/* 800D4544 000D0464  28 06 00 00 */	cmplwi r6, 0
/* 800D4548 000D0468  41 82 00 4C */	beq lbl_800D4594
/* 800D454C 000D046C  80 66 00 08 */	lwz r3, 8(r6)
/* 800D4550 000D0470  28 03 00 00 */	cmplwi r3, 0
/* 800D4554 000D0474  40 82 00 18 */	bne lbl_800D456C
/* 800D4558 000D0478  80 86 00 10 */	lwz r4, 0x10(r6)
/* 800D455C 000D047C  80 A6 00 14 */	lwz r5, 0x14(r6)
/* 800D4560 000D0480  80 C6 00 18 */	lwz r6, 0x18(r6)
/* 800D4564 000D0484  4B FF ED 49 */	bl ARStartDMA
/* 800D4568 000D0488  48 00 00 14 */	b lbl_800D457C
lbl_800D456C:
/* 800D456C 000D048C  80 86 00 14 */	lwz r4, 0x14(r6)
/* 800D4570 000D0490  80 A6 00 10 */	lwz r5, 0x10(r6)
/* 800D4574 000D0494  80 C6 00 18 */	lwz r6, 0x18(r6)
/* 800D4578 000D0498  4B FF ED 35 */	bl ARStartDMA
lbl_800D457C:
/* 800D457C 000D049C  80 6D A3 10 */	lwz r3, __ARQRequestQueueHi@sda21(r13)
/* 800D4580 000D04A0  80 03 00 1C */	lwz r0, 0x1c(r3)
/* 800D4584 000D04A4  90 0D A3 28 */	stw r0, __ARQCallbackHi@sda21(r13)
/* 800D4588 000D04A8  90 6D A3 20 */	stw r3, __ARQRequestPendingHi@sda21(r13)
/* 800D458C 000D04AC  80 03 00 00 */	lwz r0, 0(r3)
/* 800D4590 000D04B0  90 0D A3 10 */	stw r0, __ARQRequestQueueHi@sda21(r13)
lbl_800D4594:
/* 800D4594 000D04B4  80 0D A3 20 */	lwz r0, __ARQRequestPendingHi@sda21(r13)
/* 800D4598 000D04B8  28 00 00 00 */	cmplwi r0, 0
/* 800D459C 000D04BC  40 82 00 08 */	bne lbl_800D45A4
/* 800D45A0 000D04C0  4B FF FE 45 */	bl __ARQServiceQueueLo
lbl_800D45A4:
/* 800D45A4 000D04C4  80 01 00 0C */	lwz r0, 0xc(r1)
/* 800D45A8 000D04C8  38 21 00 08 */	addi r1, r1, 8
/* 800D45AC 000D04CC  7C 08 03 A6 */	mtlr r0
/* 800D45B0 000D04D0  4E 80 00 20 */	blr

.global ARQInit
ARQInit:
/* 800D45B4 000D04D4  7C 08 02 A6 */	mflr r0
/* 800D45B8 000D04D8  90 01 00 04 */	stw r0, 4(r1)
/* 800D45BC 000D04DC  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 800D45C0 000D04E0  93 E1 00 0C */	stw r31, 0xc(r1)
/* 800D45C4 000D04E4  80 0D A3 34 */	lwz r0, __ARQ_init_flag@sda21(r13)
/* 800D45C8 000D04E8  2C 00 00 01 */	cmpwi r0, 1
/* 800D45CC 000D04EC  41 82 00 3C */	beq lbl_800D4608
/* 800D45D0 000D04F0  3B E0 00 00 */	li r31, 0
/* 800D45D4 000D04F4  38 00 10 00 */	li r0, 0x1000
/* 800D45D8 000D04F8  93 ED A3 18 */	stw r31, __ARQRequestQueueLo@sda21(r13)
/* 800D45DC 000D04FC  3C 60 80 0D */	lis r3, __ARQInterruptServiceRoutine@ha
/* 800D45E0 000D0500  93 ED A3 10 */	stw r31, __ARQRequestQueueHi@sda21(r13)
/* 800D45E4 000D0504  38 63 44 E8 */	addi r3, r3, __ARQInterruptServiceRoutine@l
/* 800D45E8 000D0508  90 0D A3 30 */	stw r0, __ARQChunkSize@sda21(r13)
/* 800D45EC 000D050C  4B FF EC 41 */	bl ARRegisterDMACallback
/* 800D45F0 000D0510  38 00 00 01 */	li r0, 1
/* 800D45F4 000D0514  93 ED A3 20 */	stw r31, __ARQRequestPendingHi@sda21(r13)
/* 800D45F8 000D0518  93 ED A3 24 */	stw r31, __ARQRequestPendingLo@sda21(r13)
/* 800D45FC 000D051C  93 ED A3 28 */	stw r31, __ARQCallbackHi@sda21(r13)
/* 800D4600 000D0520  93 ED A3 2C */	stw r31, __ARQCallbackLo@sda21(r13)
/* 800D4604 000D0524  90 0D A3 34 */	stw r0, __ARQ_init_flag@sda21(r13)
lbl_800D4608:
/* 800D4608 000D0528  80 01 00 14 */	lwz r0, 0x14(r1)
/* 800D460C 000D052C  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 800D4610 000D0530  38 21 00 10 */	addi r1, r1, 0x10
/* 800D4614 000D0534  7C 08 03 A6 */	mtlr r0
/* 800D4618 000D0538  4E 80 00 20 */	blr

.global ARQPostRequest
ARQPostRequest:
/* 800D461C 000D053C  7C 08 02 A6 */	mflr r0
/* 800D4620 000D0540  28 0A 00 00 */	cmplwi r10, 0
/* 800D4624 000D0544  90 01 00 04 */	stw r0, 4(r1)
/* 800D4628 000D0548  38 00 00 00 */	li r0, 0
/* 800D462C 000D054C  94 21 FF C8 */	stwu r1, -0x38(r1)
/* 800D4630 000D0550  93 E1 00 34 */	stw r31, 0x34(r1)
/* 800D4634 000D0554  93 C1 00 30 */	stw r30, 0x30(r1)
/* 800D4638 000D0558  3B C6 00 00 */	addi r30, r6, 0
/* 800D463C 000D055C  93 A1 00 2C */	stw r29, 0x2c(r1)
/* 800D4640 000D0560  3B A3 00 00 */	addi r29, r3, 0
/* 800D4644 000D0564  90 03 00 00 */	stw r0, 0(r3)
/* 800D4648 000D0568  90 83 00 04 */	stw r4, 4(r3)
/* 800D464C 000D056C  90 A3 00 08 */	stw r5, 8(r3)
/* 800D4650 000D0570  90 E3 00 10 */	stw r7, 0x10(r3)
/* 800D4654 000D0574  91 03 00 14 */	stw r8, 0x14(r3)
/* 800D4658 000D0578  91 23 00 18 */	stw r9, 0x18(r3)
/* 800D465C 000D057C  41 82 00 0C */	beq lbl_800D4668
/* 800D4660 000D0580  91 5D 00 1C */	stw r10, 0x1c(r29)
/* 800D4664 000D0584  48 00 00 10 */	b lbl_800D4674
lbl_800D4668:
/* 800D4668 000D0588  3C 60 80 0D */	lis r3, __ARQCallbackHack@ha
/* 800D466C 000D058C  38 03 44 E4 */	addi r0, r3, __ARQCallbackHack@l
/* 800D4670 000D0590  90 1D 00 1C */	stw r0, 0x1c(r29)
lbl_800D4674:
/* 800D4674 000D0594  4B FF 1A 49 */	bl OSDisableInterrupts
/* 800D4678 000D0598  2C 1E 00 01 */	cmpwi r30, 1
/* 800D467C 000D059C  3B E3 00 00 */	addi r31, r3, 0
/* 800D4680 000D05A0  41 82 00 38 */	beq lbl_800D46B8
/* 800D4684 000D05A4  40 80 00 54 */	bge lbl_800D46D8
/* 800D4688 000D05A8  2C 1E 00 00 */	cmpwi r30, 0
/* 800D468C 000D05AC  40 80 00 08 */	bge lbl_800D4694
/* 800D4690 000D05B0  48 00 00 48 */	b lbl_800D46D8
lbl_800D4694:
/* 800D4694 000D05B4  80 0D A3 18 */	lwz r0, __ARQRequestQueueLo@sda21(r13)
/* 800D4698 000D05B8  28 00 00 00 */	cmplwi r0, 0
/* 800D469C 000D05BC  41 82 00 10 */	beq lbl_800D46AC
/* 800D46A0 000D05C0  80 6D A3 1C */	lwz r3, __ARQRequestTailLo@sda21(r13)
/* 800D46A4 000D05C4  93 A3 00 00 */	stw r29, 0(r3)
/* 800D46A8 000D05C8  48 00 00 08 */	b lbl_800D46B0
lbl_800D46AC:
/* 800D46AC 000D05CC  93 AD A3 18 */	stw r29, __ARQRequestQueueLo@sda21(r13)
lbl_800D46B0:
/* 800D46B0 000D05D0  93 AD A3 1C */	stw r29, __ARQRequestTailLo@sda21(r13)
/* 800D46B4 000D05D4  48 00 00 24 */	b lbl_800D46D8
lbl_800D46B8:
/* 800D46B8 000D05D8  80 0D A3 10 */	lwz r0, __ARQRequestQueueHi@sda21(r13)
/* 800D46BC 000D05DC  28 00 00 00 */	cmplwi r0, 0
/* 800D46C0 000D05E0  41 82 00 10 */	beq lbl_800D46D0
/* 800D46C4 000D05E4  80 6D A3 14 */	lwz r3, __ARQRequestTailHi@sda21(r13)
/* 800D46C8 000D05E8  93 A3 00 00 */	stw r29, 0(r3)
/* 800D46CC 000D05EC  48 00 00 08 */	b lbl_800D46D4
lbl_800D46D0:
/* 800D46D0 000D05F0  93 AD A3 10 */	stw r29, __ARQRequestQueueHi@sda21(r13)
lbl_800D46D4:
/* 800D46D4 000D05F4  93 AD A3 14 */	stw r29, __ARQRequestTailHi@sda21(r13)
lbl_800D46D8:
/* 800D46D8 000D05F8  80 0D A3 20 */	lwz r0, __ARQRequestPendingHi@sda21(r13)
/* 800D46DC 000D05FC  28 00 00 00 */	cmplwi r0, 0
/* 800D46E0 000D0600  40 82 00 74 */	bne lbl_800D4754
/* 800D46E4 000D0604  80 0D A3 24 */	lwz r0, __ARQRequestPendingLo@sda21(r13)
/* 800D46E8 000D0608  28 00 00 00 */	cmplwi r0, 0
/* 800D46EC 000D060C  40 82 00 68 */	bne lbl_800D4754
/* 800D46F0 000D0610  80 CD A3 10 */	lwz r6, __ARQRequestQueueHi@sda21(r13)
/* 800D46F4 000D0614  28 06 00 00 */	cmplwi r6, 0
/* 800D46F8 000D0618  41 82 00 4C */	beq lbl_800D4744
/* 800D46FC 000D061C  80 66 00 08 */	lwz r3, 8(r6)
/* 800D4700 000D0620  28 03 00 00 */	cmplwi r3, 0
/* 800D4704 000D0624  40 82 00 18 */	bne lbl_800D471C
/* 800D4708 000D0628  80 86 00 10 */	lwz r4, 0x10(r6)
/* 800D470C 000D062C  80 A6 00 14 */	lwz r5, 0x14(r6)
/* 800D4710 000D0630  80 C6 00 18 */	lwz r6, 0x18(r6)
/* 800D4714 000D0634  4B FF EB 99 */	bl ARStartDMA
/* 800D4718 000D0638  48 00 00 14 */	b lbl_800D472C
lbl_800D471C:
/* 800D471C 000D063C  80 86 00 14 */	lwz r4, 0x14(r6)
/* 800D4720 000D0640  80 A6 00 10 */	lwz r5, 0x10(r6)
/* 800D4724 000D0644  80 C6 00 18 */	lwz r6, 0x18(r6)
/* 800D4728 000D0648  4B FF EB 85 */	bl ARStartDMA
lbl_800D472C:
/* 800D472C 000D064C  80 6D A3 10 */	lwz r3, __ARQRequestQueueHi@sda21(r13)
/* 800D4730 000D0650  80 03 00 1C */	lwz r0, 0x1c(r3)
/* 800D4734 000D0654  90 0D A3 28 */	stw r0, __ARQCallbackHi@sda21(r13)
/* 800D4738 000D0658  90 6D A3 20 */	stw r3, __ARQRequestPendingHi@sda21(r13)
/* 800D473C 000D065C  80 03 00 00 */	lwz r0, 0(r3)
/* 800D4740 000D0660  90 0D A3 10 */	stw r0, __ARQRequestQueueHi@sda21(r13)
lbl_800D4744:
/* 800D4744 000D0664  80 0D A3 20 */	lwz r0, __ARQRequestPendingHi@sda21(r13)
/* 800D4748 000D0668  28 00 00 00 */	cmplwi r0, 0
/* 800D474C 000D066C  40 82 00 08 */	bne lbl_800D4754
/* 800D4750 000D0670  4B FF FC 95 */	bl __ARQServiceQueueLo
lbl_800D4754:
/* 800D4754 000D0674  7F E3 FB 78 */	mr r3, r31
/* 800D4758 000D0678  4B FF 19 8D */	bl OSRestoreInterrupts
/* 800D475C 000D067C  80 01 00 3C */	lwz r0, 0x3c(r1)
/* 800D4760 000D0680  83 E1 00 34 */	lwz r31, 0x34(r1)
/* 800D4764 000D0684  83 C1 00 30 */	lwz r30, 0x30(r1)
/* 800D4768 000D0688  7C 08 03 A6 */	mtlr r0
/* 800D476C 000D068C  83 A1 00 2C */	lwz r29, 0x2c(r1)
/* 800D4770 000D0690  38 21 00 38 */	addi r1, r1, 0x38
/* 800D4774 000D0694  4E 80 00 20 */	blr

.section .sbss

.global __ARQRequestQueueHi
__ARQRequestQueueHi:
	.skip 0x4
.global __ARQRequestTailHi
__ARQRequestTailHi:
	.skip 0x4
.global __ARQRequestQueueLo
__ARQRequestQueueLo:
	.skip 0x4
.global __ARQRequestTailLo
__ARQRequestTailLo:
	.skip 0x4
.global __ARQRequestPendingHi
__ARQRequestPendingHi:
	.skip 0x4
.global __ARQRequestPendingLo
__ARQRequestPendingLo:
	.skip 0x4
.global __ARQCallbackHi
__ARQCallbackHi:
	.skip 0x4
.global __ARQCallbackLo
__ARQCallbackLo:
	.skip 0x4
.global __ARQChunkSize
__ARQChunkSize:
	.skip 0x4
.global __ARQ_init_flag
__ARQ_init_flag:
	.skip 0x4
