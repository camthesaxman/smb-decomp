.include "macros.inc"

.section .text, "ax"  # 0x800065A0 - 0x8010F860

.global ldexp
ldexp:
/* 80108770 00104690  7C 08 02 A6 */	mflr r0
/* 80108774 00104694  90 01 00 04 */	stw r0, 4(r1)
/* 80108778 00104698  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8010877C 0010469C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80108780 001046A0  7C 7F 1B 78 */	mr r31, r3
/* 80108784 001046A4  D8 21 00 08 */	stfd f1, 8(r1)
/* 80108788 001046A8  C8 21 00 08 */	lfd f1, 8(r1)
/* 8010878C 001046AC  4B FF EA 11 */	bl __fpclassifyd__Fd
/* 80108790 001046B0  2C 03 00 02 */	cmpwi r3, 2
/* 80108794 001046B4  40 81 00 14 */	ble lbl_801087A8
/* 80108798 001046B8  C8 02 C3 E8 */	lfd f0, lbl_802F6BE8@sda21(r2)
/* 8010879C 001046BC  C8 21 00 08 */	lfd f1, 8(r1)
/* 801087A0 001046C0  FC 00 08 00 */	fcmpu cr0, f0, f1
/* 801087A4 001046C4  40 82 00 0C */	bne lbl_801087B0
lbl_801087A8:
/* 801087A8 001046C8  C8 21 00 08 */	lfd f1, 8(r1)
/* 801087AC 001046CC  48 00 01 28 */	b lbl_801088D4
lbl_801087B0:
/* 801087B0 001046D0  80 01 00 08 */	lwz r0, 8(r1)
/* 801087B4 001046D4  80 C1 00 0C */	lwz r6, 0xc(r1)
/* 801087B8 001046D8  54 03 65 7F */	rlwinm. r3, r0, 0xc, 0x15, 0x1f
/* 801087BC 001046DC  7C 05 03 78 */	mr r5, r0
/* 801087C0 001046E0  38 83 00 00 */	addi r4, r3, 0
/* 801087C4 001046E4  40 82 00 50 */	bne lbl_80108814
/* 801087C8 001046E8  54 A0 00 7E */	clrlwi r0, r5, 1
/* 801087CC 001046EC  7C C0 03 79 */	or. r0, r6, r0
/* 801087D0 001046F0  40 82 00 08 */	bne lbl_801087D8
/* 801087D4 001046F4  48 00 01 00 */	b lbl_801088D4
lbl_801087D8:
/* 801087D8 001046F8  C8 02 C3 F0 */	lfd f0, lbl_802F6BF0@sda21(r2)
/* 801087DC 001046FC  3C 60 FF FF */	lis r3, 0xFFFF3CB0@ha
/* 801087E0 00104700  38 03 3C B0 */	addi r0, r3, 0xFFFF3CB0@l
/* 801087E4 00104704  FC 01 00 32 */	fmul f0, f1, f0
/* 801087E8 00104708  7C 1F 00 00 */	cmpw r31, r0
/* 801087EC 0010470C  D8 01 00 08 */	stfd f0, 8(r1)
/* 801087F0 00104710  80 01 00 08 */	lwz r0, 8(r1)
/* 801087F4 00104714  54 03 65 7E */	rlwinm r3, r0, 0xc, 0x15, 0x1f
/* 801087F8 00104718  7C 05 03 78 */	mr r5, r0
/* 801087FC 0010471C  38 83 FF CA */	addi r4, r3, -54
/* 80108800 00104720  40 80 00 14 */	bge lbl_80108814
/* 80108804 00104724  C8 22 C3 F8 */	lfd f1, lbl_802F6BF8@sda21(r2)
/* 80108808 00104728  C8 01 00 08 */	lfd f0, 8(r1)
/* 8010880C 0010472C  FC 21 00 32 */	fmul f1, f1, f0
/* 80108810 00104730  48 00 00 C4 */	b lbl_801088D4
lbl_80108814:
/* 80108814 00104734  2C 04 07 FF */	cmpwi r4, 0x7ff
/* 80108818 00104738  40 82 00 10 */	bne lbl_80108828
/* 8010881C 0010473C  C8 01 00 08 */	lfd f0, 8(r1)
/* 80108820 00104740  FC 20 00 2A */	fadd f1, f0, f0
/* 80108824 00104744  48 00 00 B0 */	b lbl_801088D4
lbl_80108828:
/* 80108828 00104748  7C 84 FA 14 */	add r4, r4, r31
/* 8010882C 0010474C  2C 04 07 FE */	cmpwi r4, 0x7fe
/* 80108830 00104750  40 81 00 1C */	ble lbl_8010884C
/* 80108834 00104754  C8 22 C4 00 */	lfd f1, lbl_802F6C00@sda21(r2)
/* 80108838 00104758  C8 41 00 08 */	lfd f2, 8(r1)
/* 8010883C 0010475C  4B FF FC 21 */	bl copysign
/* 80108840 00104760  C8 02 C4 00 */	lfd f0, lbl_802F6C00@sda21(r2)
/* 80108844 00104764  FC 20 00 72 */	fmul f1, f0, f1
/* 80108848 00104768  48 00 00 8C */	b lbl_801088D4
lbl_8010884C:
/* 8010884C 0010476C  2C 04 00 00 */	cmpwi r4, 0
/* 80108850 00104770  40 81 00 1C */	ble lbl_8010886C
/* 80108854 00104774  54 A3 03 00 */	rlwinm r3, r5, 0, 0xc, 0
/* 80108858 00104778  54 80 A0 16 */	slwi r0, r4, 0x14
/* 8010885C 0010477C  7C 60 03 78 */	or r0, r3, r0
/* 80108860 00104780  90 01 00 08 */	stw r0, 8(r1)
/* 80108864 00104784  C8 21 00 08 */	lfd f1, 8(r1)
/* 80108868 00104788  48 00 00 6C */	b lbl_801088D4
lbl_8010886C:
/* 8010886C 0010478C  2C 04 FF CA */	cmpwi r4, -54
/* 80108870 00104790  41 81 00 44 */	bgt lbl_801088B4
/* 80108874 00104794  3C 60 00 01 */	lis r3, 0x0000C350@ha
/* 80108878 00104798  38 03 C3 50 */	addi r0, r3, 0x0000C350@l
/* 8010887C 0010479C  7C 1F 00 00 */	cmpw r31, r0
/* 80108880 001047A0  40 81 00 1C */	ble lbl_8010889C
/* 80108884 001047A4  C8 22 C4 00 */	lfd f1, lbl_802F6C00@sda21(r2)
/* 80108888 001047A8  C8 41 00 08 */	lfd f2, 8(r1)
/* 8010888C 001047AC  4B FF FB D1 */	bl copysign
/* 80108890 001047B0  C8 02 C4 00 */	lfd f0, lbl_802F6C00@sda21(r2)
/* 80108894 001047B4  FC 20 00 72 */	fmul f1, f0, f1
/* 80108898 001047B8  48 00 00 3C */	b lbl_801088D4
lbl_8010889C:
/* 8010889C 001047BC  C8 22 C3 F8 */	lfd f1, lbl_802F6BF8@sda21(r2)
/* 801088A0 001047C0  C8 41 00 08 */	lfd f2, 8(r1)
/* 801088A4 001047C4  4B FF FB B9 */	bl copysign
/* 801088A8 001047C8  C8 02 C3 F8 */	lfd f0, lbl_802F6BF8@sda21(r2)
/* 801088AC 001047CC  FC 20 00 72 */	fmul f1, f0, f1
/* 801088B0 001047D0  48 00 00 24 */	b lbl_801088D4
lbl_801088B4:
/* 801088B4 001047D4  38 04 00 36 */	addi r0, r4, 0x36
/* 801088B8 001047D8  C8 22 C4 08 */	lfd f1, lbl_802F6C08@sda21(r2)
/* 801088BC 001047DC  54 A3 03 00 */	rlwinm r3, r5, 0, 0xc, 0
/* 801088C0 001047E0  54 00 A0 16 */	slwi r0, r0, 0x14
/* 801088C4 001047E4  7C 60 03 78 */	or r0, r3, r0
/* 801088C8 001047E8  90 01 00 08 */	stw r0, 8(r1)
/* 801088CC 001047EC  C8 01 00 08 */	lfd f0, 8(r1)
/* 801088D0 001047F0  FC 21 00 32 */	fmul f1, f1, f0
lbl_801088D4:
/* 801088D4 001047F4  80 01 00 24 */	lwz r0, 0x24(r1)
/* 801088D8 001047F8  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 801088DC 001047FC  38 21 00 20 */	addi r1, r1, 0x20
/* 801088E0 00104800  7C 08 03 A6 */	mtlr r0
/* 801088E4 00104804  4E 80 00 20 */	blr

.section .sdata2

.global lbl_802F6BE8
lbl_802F6BE8:
	# ROM: 0x1F0608
	.4byte 0
	.4byte 0

.global lbl_802F6BF0
lbl_802F6BF0:
	# ROM: 0x1F0610
	.byte 0x43, 0x50, 0x00, 0x00
	.4byte 0

.global lbl_802F6BF8
lbl_802F6BF8:
	# ROM: 0x1F0618
	.byte 0x01, 0xA5, 0x6E, 0x1F
	.byte 0xC2, 0xF8, 0xF3, 0x59

.global lbl_802F6C00
lbl_802F6C00:
	# ROM: 0x1F0620
	.byte 0x7E, 0x37, 0xE4, 0x3C
	.byte 0x88, 0x00, 0x75, 0x9C

.global lbl_802F6C08
lbl_802F6C08:
	# ROM: 0x1F0628
	.byte 0x3C, 0x90, 0x00, 0x00
	.4byte 0
