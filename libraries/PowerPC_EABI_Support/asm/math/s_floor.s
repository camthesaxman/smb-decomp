.include "macros.inc"

.section .text, "ax"  # 0x800065A0 - 0x8010F860

.global floor
floor:
/* 80108568 00104488  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8010856C 0010448C  D8 21 00 08 */	stfd f1, 8(r1)
/* 80108570 00104490  80 01 00 08 */	lwz r0, 8(r1)
/* 80108574 00104494  80 E1 00 0C */	lwz r7, 0xc(r1)
/* 80108578 00104498  54 03 65 7E */	rlwinm r3, r0, 0xc, 0x15, 0x1f
/* 8010857C 0010449C  38 83 FC 01 */	addi r4, r3, -1023
/* 80108580 001044A0  2C 04 00 14 */	cmpwi r4, 0x14
/* 80108584 001044A4  7C 06 03 78 */	mr r6, r0
/* 80108588 001044A8  40 80 00 A4 */	bge lbl_8010862C
/* 8010858C 001044AC  2C 04 00 00 */	cmpwi r4, 0
/* 80108590 001044B0  40 80 00 48 */	bge lbl_801085D8
/* 80108594 001044B4  C8 42 C3 D0 */	lfd f2, lbl_802F6BD0-_SDA2_BASE_(r2)
/* 80108598 001044B8  C8 21 00 08 */	lfd f1, 8(r1)
/* 8010859C 001044BC  C8 02 C3 D8 */	lfd f0, lbl_802F6BD8-_SDA2_BASE_(r2)
/* 801085A0 001044C0  FC 22 08 2A */	fadd f1, f2, f1
/* 801085A4 001044C4  FC 01 00 40 */	fcmpo cr0, f1, f0
/* 801085A8 001044C8  40 81 01 18 */	ble lbl_801086C0
/* 801085AC 001044CC  2C 06 00 00 */	cmpwi r6, 0
/* 801085B0 001044D0  41 80 00 10 */	blt lbl_801085C0
/* 801085B4 001044D4  38 E0 00 00 */	li r7, 0
/* 801085B8 001044D8  38 C0 00 00 */	li r6, 0
/* 801085BC 001044DC  48 00 01 04 */	b lbl_801086C0
lbl_801085C0:
/* 801085C0 001044E0  54 C0 00 7E */	clrlwi r0, r6, 1
/* 801085C4 001044E4  7C 00 3B 79 */	or. r0, r0, r7
/* 801085C8 001044E8  41 82 00 F8 */	beq lbl_801086C0
/* 801085CC 001044EC  3C C0 BF F0 */	lis r6, 0xbff0
/* 801085D0 001044F0  38 E0 00 00 */	li r7, 0
/* 801085D4 001044F4  48 00 00 EC */	b lbl_801086C0
lbl_801085D8:
/* 801085D8 001044F8  3C 60 00 10 */	lis r3, 0x000FFFFF@ha
/* 801085DC 001044FC  38 03 FF FF */	addi r0, r3, 0x000FFFFF@l
/* 801085E0 00104500  7C 05 26 30 */	sraw r5, r0, r4
/* 801085E4 00104504  7C C0 28 38 */	and r0, r6, r5
/* 801085E8 00104508  7C E0 03 79 */	or. r0, r7, r0
/* 801085EC 0010450C  40 82 00 0C */	bne lbl_801085F8
/* 801085F0 00104510  C8 21 00 08 */	lfd f1, 8(r1)
/* 801085F4 00104514  48 00 00 D8 */	b lbl_801086CC
lbl_801085F8:
/* 801085F8 00104518  C8 42 C3 D0 */	lfd f2, lbl_802F6BD0-_SDA2_BASE_(r2)
/* 801085FC 0010451C  C8 21 00 08 */	lfd f1, 8(r1)
/* 80108600 00104520  C8 02 C3 D8 */	lfd f0, lbl_802F6BD8-_SDA2_BASE_(r2)
/* 80108604 00104524  FC 22 08 2A */	fadd f1, f2, f1
/* 80108608 00104528  FC 01 00 40 */	fcmpo cr0, f1, f0
/* 8010860C 0010452C  40 81 00 B4 */	ble lbl_801086C0
/* 80108610 00104530  2C 06 00 00 */	cmpwi r6, 0
/* 80108614 00104534  40 80 00 0C */	bge lbl_80108620
/* 80108618 00104538  7C 60 26 30 */	sraw r0, r3, r4
/* 8010861C 0010453C  7C C6 02 14 */	add r6, r6, r0
lbl_80108620:
/* 80108620 00104540  7C C6 28 78 */	andc r6, r6, r5
/* 80108624 00104544  38 E0 00 00 */	li r7, 0
/* 80108628 00104548  48 00 00 98 */	b lbl_801086C0
lbl_8010862C:
/* 8010862C 0010454C  2C 04 00 33 */	cmpwi r4, 0x33
/* 80108630 00104550  40 81 00 20 */	ble lbl_80108650
/* 80108634 00104554  2C 04 04 00 */	cmpwi r4, 0x400
/* 80108638 00104558  40 82 00 10 */	bne lbl_80108648
/* 8010863C 0010455C  C8 01 00 08 */	lfd f0, 8(r1)
/* 80108640 00104560  FC 20 00 2A */	fadd f1, f0, f0
/* 80108644 00104564  48 00 00 88 */	b lbl_801086CC
lbl_80108648:
/* 80108648 00104568  C8 21 00 08 */	lfd f1, 8(r1)
/* 8010864C 0010456C  48 00 00 80 */	b lbl_801086CC
lbl_80108650:
/* 80108650 00104570  38 04 FF EC */	addi r0, r4, -20
/* 80108654 00104574  38 60 FF FF */	li r3, -1
/* 80108658 00104578  7C 65 04 30 */	srw r5, r3, r0
/* 8010865C 0010457C  7C E0 28 39 */	and. r0, r7, r5
/* 80108660 00104580  40 82 00 0C */	bne lbl_8010866C
/* 80108664 00104584  C8 21 00 08 */	lfd f1, 8(r1)
/* 80108668 00104588  48 00 00 64 */	b lbl_801086CC
lbl_8010866C:
/* 8010866C 0010458C  C8 42 C3 D0 */	lfd f2, lbl_802F6BD0-_SDA2_BASE_(r2)
/* 80108670 00104590  C8 21 00 08 */	lfd f1, 8(r1)
/* 80108674 00104594  C8 02 C3 D8 */	lfd f0, lbl_802F6BD8-_SDA2_BASE_(r2)
/* 80108678 00104598  FC 22 08 2A */	fadd f1, f2, f1
/* 8010867C 0010459C  FC 01 00 40 */	fcmpo cr0, f1, f0
/* 80108680 001045A0  40 81 00 40 */	ble lbl_801086C0
/* 80108684 001045A4  2C 06 00 00 */	cmpwi r6, 0
/* 80108688 001045A8  40 80 00 34 */	bge lbl_801086BC
/* 8010868C 001045AC  2C 04 00 14 */	cmpwi r4, 0x14
/* 80108690 001045B0  40 82 00 0C */	bne lbl_8010869C
/* 80108694 001045B4  38 C6 00 01 */	addi r6, r6, 1
/* 80108698 001045B8  48 00 00 24 */	b lbl_801086BC
lbl_8010869C:
/* 8010869C 001045BC  20 04 00 34 */	subfic r0, r4, 0x34
/* 801086A0 001045C0  38 60 00 01 */	li r3, 1
/* 801086A4 001045C4  7C 60 00 30 */	slw r0, r3, r0
/* 801086A8 001045C8  7C 07 02 14 */	add r0, r7, r0
/* 801086AC 001045CC  7C 00 38 40 */	cmplw r0, r7
/* 801086B0 001045D0  40 80 00 08 */	bge lbl_801086B8
/* 801086B4 001045D4  38 C6 00 01 */	addi r6, r6, 1
lbl_801086B8:
/* 801086B8 001045D8  7C 07 03 78 */	mr r7, r0
lbl_801086BC:
/* 801086BC 001045DC  7C E7 28 78 */	andc r7, r7, r5
lbl_801086C0:
/* 801086C0 001045E0  90 C1 00 08 */	stw r6, 8(r1)
/* 801086C4 001045E4  90 E1 00 0C */	stw r7, 0xc(r1)
/* 801086C8 001045E8  C8 21 00 08 */	lfd f1, 8(r1)
lbl_801086CC:
/* 801086CC 001045EC  38 21 00 10 */	addi r1, r1, 0x10
/* 801086D0 001045F0  4E 80 00 20 */	blr
